<Engine Id="SiegeDefender">
	<Objects>
		<Projectile 	Id="WoodArrow" Damage="8-12" 
			AssetId="Projectiles/WoodenBalista" 
			RoF="0.2" Ammunition="1000" Reload="1" 
			Scatters="1"
			Accuracy="0.9" Deviation="0.001" />
		<Projectile 	Id="Rock" Damage="0-6" 
			AssetId="Projectiles/Rock" 
			RoF="0.1" Ammunition="10000" Reload="0.5" 
			Accuracy="0.65" Deviation="0.001" 
			SpeedDeviation="500-1500"
			IsRotationRandomized="true"
			DeathDelay="0.5"
			Scatters="3" />
		<Projectile 	Id="ScatterArrow" Damage="1-5" 
			AssetId="Projectiles/WoodenBalista" 
			RoF="0.3" Ammunition="100" Reload="1" 
			Accuracy="0.3" Deviation="0.0001" Scatters="5" />

		<Projectile 	Id="IronArrow" Damage="10-30" 
			AssetId="Projectiles/IronBalista" 
			RoF="0.25" Ammunition="500" Reload="0.2" 
			Scatters="1"
			Accuracy="0.7" Deviation="0.005" />

		<Projectile 	Id="FireBall" Damage="8-11" 
			AssetId="Projectiles/FireBall" AoEId="FireDome" 
			RoF="0.5" Ammunition="25" Reload="2" 
			Scatters="1"
			Accuracy="0.9" Deviation="0.001" />
		<Projectile 	Id="ExplosiveFireBall" Damage="4-7" 
			AssetId="Projectiles/FireBall" AoEId="Explosion"
			RoF="0.2" Ammunition="2500" Reload="0" 
			Scatters="1"
			Accuracy="0.5" Deviation="0.01" />
		<Piercing 	Id="IronBall" Damage="50-80" 
			AssetId="Projectiles/IronBall"
			RoF="1" Ammunition="3000" Reload="1" 
			Scatters="1"
			Accuracy="1" Deviation="0" />

		<AoE 			Id="FireDome" AssetId="Projectiles/AoE" Radius="20" Damage="4-7" Scatters="1" />
		<ParticleAoE 	Id="Explosion" AssetId="Projectiles/Explosion" Radius="20" Damage="2-3" Scatters="1" />

		<!-- Enemies -->
		<Enemy Id="CrystalSpider" 	AssetId="Enemies/CrystalSpider"		Health="20" 	Speed="3" 	DeathDelay="1.3" CollisionEffectNormal="CrystalBreak_Small" Target="Player" />
		<Enemy Id="CrystalShield" 	AssetId="Enemies/CrystalShield" 	Health="700"  	Speed="0" 	DeathDelay="0.4" CollisionEffectNormal="CrystalBreak_Small" />
		<Enemy Id="SpiderColumn" 	AssetId="Enemies/SpiderColumn" 	 	Health="35"  	Speed="0" 	DeathDelay="0.4" CollisionEffectNormal="CrystalBreak_Small" >
			<Elements>
				<EnemySpawn Id="SpiderSpawn" AssetId="SpiderSpawn" LevelId="" />
			</Elements>
			<Triggers>
				<Trigger Id="RandomlySpawnsSpider" TriggerOnce="false" >
					<RandomCondition Target="{Monster}" Frequency="4" Value="50" /> <!-- Percentage -->
					<Condition Target="SpiderSpawn" Property="ActiveObjects" Value="\1" />
					<Setter Target="SpiderSpawn" Property="Level" Value="SpawnSpiders" />
				</Trigger>
			</Triggers>
		</Enemy>
		<Enemy Id="StrongSpiderColumn" AssetId="Enemies/SpiderColumn" 	Health="150"  	Speed="0" 	DeathDelay="0.4" CollisionEffectNormal="CrystalBreak_Small" >
			<Elements>
				<EnemySpawn Id="SpiderSpawn" AssetId="SpiderSpawn" LevelId="SpawnSpidersInfinite" />
			</Elements>
		</Enemy>
		<Boss  Id="StoneGolem" 		AssetId="Enemies/StoneGolemBoss" 	Health="9325" 	Speed="2" DeathDelay="5"
			CollisionEffectNormal="StoneBreak" >
			<Elements>
				<EnemySpawn Id="SpiderColumns" AssetId="SpiderColumns" LevelId="" />
				<EnemySpawn Id="WarpGates" AssetId="WarpGates" LevelId="" />
				<EnemySpawn Id="ShieldSpawn" AssetId="ShieldSpawn" LevelId="" />
			</Elements>
			
			<Limbs>
				<Limb Id="Head" 		Health="666" 	AssetId="Head" 			DamageMultiplier="1.2" 
					CollisionEffectNormal="StoneBreak" >
					<Triggers>
						<EventTrigger Event="Break" >
							<Drop Target="Wood" Amount="3-10" />
							<Setter Target="{Monster}" Property="ActiveSkill" Value="HeadBroken|ScreamingRandomMovement" />
						</EventTrigger>
					</Triggers>
				</Limb>
				<Limb Id="RightHand" 	Health="750" 	AssetId="RightHand" 	DamageMultiplier="0.75" 
					CollisionEffectNormal="CrystalBreak_Small"
					CollisionEffectBroken="StoneBreak" > 
					<Triggers>
						<EventTrigger Event="Break" >							
							<Drop Target="LightWood" Amount="1-6" />
							<Setter Target="{Monster}" Property="ActiveSkill" Value="RightHandBroken|ScreamingRandomMovement" />
						</EventTrigger>
					</Triggers>
				</Limb>
				<Limb Id="LeftHand" 	Health="750" 	AssetId="LeftHand" 		DamageMultiplier="0.75"
					CollisionEffectNormal="CrystalBreak_Small"
					CollisionEffectBroken="StoneBreak" >
					<Triggers>
						<EventTrigger Event="Break" >
							<Drop Target="LightWood" Amount="1-6" />
							<Setter Target="{Monster}" Property="ActiveSkill" Value="LeftHandBroken|ScreamingRandomMovement" />
						</EventTrigger>
					</Triggers>
				</Limb>
				<Limb Id="RightLeg" 	Health="500" 	AssetId="RightLeg" 		DamageMultiplier="0.75"
					CollisionEffectNormal="CrystalBreak_Small"
					CollisionEffectBroken="StoneBreak" >
					<Triggers>
						<EventTrigger Event="Break" >
							<Drop Target="LightWood" Amount="1-6" />
						</EventTrigger>
					</Triggers>
				</Limb>
				<Limb Id="LeftLeg" 		Health="500" 	AssetId="LeftLeg" 		DamageMultiplier="0.75" 
					CollisionEffectNormal="CrystalBreak_Small"
					CollisionEffectBroken="StoneBreak" >
					<Triggers>
						<EventTrigger Event="Break" >
							<Drop Target="LightWood" Amount="1-6" />
						</EventTrigger>
					</Triggers>
				</Limb>
				<Limb Id="RightFoot" 	Health="750" 	AssetId="Bip001 R Foot" DamageMultiplier="0.75"
					CollisionEffectNormal="CrystalBreak_Small"
					CollisionEffectBroken="StoneBreak" >
					<Triggers>
						<EventTrigger Event="Break" >
							<Drop Target="LightWood" Amount="1-6" />
							<Setter Target="{Monster}" Property="ActiveSkill" Value="RightFootBroken|ScreamingRandomMovement" />
						</EventTrigger>
					</Triggers>
				</Limb>
				<Limb Id="LeftFoot" 	Health="750" 	AssetId="Bip001 L Foot" DamageMultiplier="0.75" 
					CollisionEffectNormal="CrystalBreak_Small"
					CollisionEffectBroken="StoneBreak" >
					<Triggers>
						<EventTrigger Event="Break" >
							<Drop Target="LightWood" Amount="1-6" />
							<Setter Target="{Monster}" Property="ActiveSkill" Value="LeftFootBroken|ScreamingRandomMovement" />
						</EventTrigger>
					</Triggers>
				</Limb>
				<Limb Id="Crystal" 		Health="1000" 	AssetId="Bip001 Spine2" DamageMultiplier="0.25" 
					CollisionEffectNormal="CrystalBreak_Small" >
					<Triggers>
						<EventTrigger Event="Break" >
							<Drop Target="LightWood" Amount="1-6" />
							<Setter Target="{Monster}" Property="ActiveSkill" Value="CrystalBroken|RandomMovement" />
						</EventTrigger>
					</Triggers>
				</Limb>
			</Limbs>

			<Skills>
				<Skill Id="Idle"> <!-- Default Skill, this skill is always active -->
					<Setter Target="{Monster}" Property="AnimationId" Value="Idle" Wait="4" />
				</Skill>
				<Skill Id="Scream"> <!-- Default Skill, this skill is always active -->
					<Setter Target="{Monster}" Property="AnimationId" Value="Scream" Wait="1.5" />
				</Skill>
				<Skill Id="CrystalShield" IsQueuedable="true" >
					<Setter Target="{Monster}" Property="AnimationId" Value="SmashSpawnShield" Wait="2.65" />
					<Setter Target="{Monster}" Property="AnimationId" Value="Idle" />
					<Setter Target="ShieldSpawn" Property="Level" Value="SpawnCrystalShield" />
				</Skill>
				<Skill Id="ScreamingCrystalShield" IsQueuedable="true" >
					<Setter Target="{Monster}" Property="AnimationId" Value="Scream" Wait="1.5" />
					<Setter Target="{Monster}" Property="AnimationId" Value="SmashSpawnShield" Wait="2.65" />
					<Setter Target="{Monster}" Property="AnimationId" Value="Idle" />
					<Setter Target="ShieldSpawn" Property="Level" Value="SpawnCrystalShield" />
				</Skill>
				<Skill Id="SpiderColumn">
					<Setter Target="{Monster}" Property="AnimationId" Value="SmashSpawnPillar" Wait="2.3" />
					<Setter Target="SpiderColumns" Property="Level" Value="SpawnSpiderColumn" Wait="2" />
					<Setter Target="{Monster}" Property="AnimationId" Value="Idle" />
				</Skill>
				<Skill Id="Slam" InterruptThreshold="200" >
					<Setter Target="{Monster}" Property="AnimationId" Value="Slam_Start" Wait="2.1" />
					<Setter Target="{Monster}" Property="AnimationId" Value="Slam_Charge" Wait="8" IsInterruptable="true" />
					<Setter Target="{Monster}" Property="AnimationId" Value="Slam_Run" />
					<MoveAction Target="{Monster}" Id="RandomMovementAction" MoveTarget="Player" SpeedMultiplier="10" />
					<Setter Target="{Monster}" Property="AnimationId" Value="Slam_End" Wait="0.8" />
					<Triggers>
						<EventTrigger Event="Interrupt">
							<Setter Target="{Monster}" Property="ActiveSkill" Value="LeftHandBroken|ScreamingCrystalShield" />
						</EventTrigger>
					</Triggers>
				</Skill>
				<Skill Id="RandomMovement">
					<Setter Target="{Monster}" Property="AnimationId" Value="Walk" />
					<MoveAction Id="RandomMovementAction" Target="{Monster}" />
				</Skill>
				<Skill Id="ScreamingRandomMovement">
					<Setter Target="{Monster}" Property="AnimationId" Value="Scream" Wait="1.5" />
					<Setter Target="{Monster}" Property="AnimationId" Value="Walk" />
					<MoveAction Id="RandomMovementAction" Target="{Monster}" />
				</Skill>
				<!-- When Broken -->
				<!-- These are also defined as skills, interrupt skills, meaning they will interrupt any currently charged skill -->
				<Skill Id="HeadBroken" IsInterrupt="true">
					<Setter Target="{Monster}" Property="AnimationId" Value="HeadBroken" Wait="1.6" />
					<Setter Target="{Monster}" Property="AnimationId" Value="Idle" />
				</Skill>
				<Skill Id="RightHandBroken" IsInterrupt="true">
					<Setter Target="{Monster}" Property="AnimationId" Value="RightHandBroken" Wait="1.6" />
					<Setter Target="{Monster}" Property="AnimationId" Value="Idle" />
				</Skill>
				<Skill Id="LeftHandBroken" IsInterrupt="true">
					<Setter Target="{Monster}" Property="AnimationId" Value="LeftHandBroken" Wait="1.3" />
					<Setter Target="{Monster}" Property="AnimationId" Value="Idle" />
				</Skill>
				<Skill Id="RightFootBroken" IsInterrupt="true">
					<Setter Target="{Monster}" Property="AnimationId" Value="HeadBroken" Wait="1.6" />
					<Setter Target="{Monster}" Property="AnimationId" Value="Idle" />
				</Skill>
				<Skill Id="LeftFootBroken" IsInterrupt="true">
					<Setter Target="{Monster}" Property="AnimationId" Value="HeadBroken" Wait="1.6" />
					<Setter Target="{Monster}" Property="AnimationId" Value="Idle" />
				</Skill>
				<Skill Id="CrystalBroken" IsInterrupt="true">
					<Setter Target="{Monster}" Property="AnimationId" Value="HeadBroken" Wait="1.6" />
					<Setter Target="{Monster}" Property="AnimationId" Value="Idle" />
				</Skill>
			</Skills>

			<Triggers>
				<Trigger TriggerOnce="false" >
					<RandomCondition Target="{Monster}" Frequency="1" Value="30" />
					<Condition Target="ShieldSpawn" Property="ActiveObjects" Value="\1" />
					<Setter Target="{Monster}" Property="ActiveSkill" Value="Slam|RandomMovement" />
				</Trigger>

				<Trigger TriggerOnce="false" >
					<RandomCondition Target="{Monster}" Frequency="2" Value="5" />
					<Condition Target="ShieldSpawn" Property="ActiveObjects" Value="\1" />
					<Setter Target="{Monster}" Property="ActiveSkill" Value="RandomMovement|Idle" />
				</Trigger>
				<Trigger TriggerOnce="false" >
					<RandomCondition Target="{Monster}" Frequency="1" Value="25" />
					<Condition Target="ShieldSpawn" Property="ActiveObjects" Value="\1" />
					<Condition Target="SpiderColumns" Property="ActiveObjects" Value="\3" />
					<Setter Target="{Monster}" Property="ActiveSkill" Value="SpiderColumn" />
				</Trigger>
				<Trigger>
					<Condition Target="{Monster}" Property="Health" Value="\6660" />
					<Setter Target="WarpGates" Property="Level" Value="SpiderColumnSwarm" />
				</Trigger>
				<Trigger>
					<Condition Target="{Monster}" Property="Health" Value="\7200" />
					<Setter Target="{Monster}" Property="ActiveSkill" Value="CrystalShield" />
				</Trigger>
				<Trigger>
					<Condition Target="{Monster}" Property="Health" Value="\4440" />
					<Setter Target="{Monster}" Property="ActiveSkill" Value="CrystalShield" />
				</Trigger>
				<Trigger>
					<Condition Target="{Monster}" Property="Health" Value="\2220" />
					<Setter Target="{Monster}" Property="ActiveSkill" Value="CrystalShield" />
				</Trigger>
				<Trigger>
					<Condition Target="{Monster}" Property="Health" Value="\1110" />
					<Setter Target="{Monster}" Property="ActiveSkill" Value="CrystalShield" />
				</Trigger>
			</Triggers>
		</Boss>

		<!-- Special Effects -->
		<DamageGUI Id="StandardDamageGUI" 		AssetId="GUIs/DamageDisplay" />
		<SpecialEffect Id="CrystalBreak_Small" 	AssetId="SpecialEffects/CrystalBreak_Small" />
		<SpecialEffect Id="StoneBreak" 			AssetId="SpecialEffects/StoneBreak" />

		<Object Id="Tree" AssetId="Projectiles/Rock"/>
	</Objects>

	<Levels>
		<Level Id="Level1" Interval="1.12345" LoopCount="0">
			<Cache EnemyId="StoneGolem" />
			<Cache EnemyId="CrystalSpider" Count="5" />
			<Cache EnemyId="StandardDamageGUI" Count="20" />
			<Cache EnemyId="CrystalBreak_Small" Count="10" />
			<Cache EnemyId="StoneBreak" Count="10" />
			<Cache EnemyId="SpiderColumn" Count="5" />
			<Cache EnemyId="CrystalShield" />

			<Spawn EnemyId="StoneGolem" />
		</Level>
		<SubLevel Id="SpawnCrystalShield" Interval="0.1" LoopCount="0">
			<Spawn EnemyId="CrystalShield" />
		</SubLevel>
		<SubLevel Id="SpiderColumnSwarm" Interval="15" LoopCount="-1">
			<Spawn EnemyId="StrongSpiderColumn" />
		</SubLevel>
		<SubLevel Id="SpawnSpiderColumn" Interval="0.1" LoopCount="0">
			<Spawn EnemyId="SpiderColumn" />
		</SubLevel>
		<SubLevel Id="SpawnSpiders" Interval="3" LoopCount="1">
			<Spawn EnemyId="CrystalSpider" />
		</SubLevel>
		<SubLevel Id="SpawnSpidersInfinite" Interval="10" LoopCount="-1">
			<Spawn EnemyId="CrystalSpider" />
		</SubLevel>

		<!-- Environtments -->
		<SubLevel Id="Trees">
			<Spawn EnemyId="Tree"/>
			<Spawn EnemyId="Tree"/>
			<Spawn EnemyId="Tree"/>
			<Spawn EnemyId="Tree"/>
			<Spawn EnemyId="Tree"/>
			<Spawn EnemyId="Tree"/>
			<Spawn EnemyId="Tree"/>
			<Spawn EnemyId="Tree"/>
			<Spawn EnemyId="Tree"/>
			<Spawn EnemyId="Tree"/>
		</SubLevel>
	</Levels>

	<Scenes>
		<Scene Id="MainMenu" AssetId="Scenes/MainMenu">
			<Elements>
				<Button AssetId="WeaponSelection" >
					<Triggers><EventTrigger Event="Click"><LoadScene Target="SkillTree" /></EventTrigger></Triggers>
				</Button>
				<Button AssetId="StartGame">
					<Triggers><EventTrigger Event="Click"><LoadScene Target="Limbo" LevelId="Level1" /></EventTrigger></Triggers>
				</Button>
				<Button AssetId="Options">
					<Triggers><EventTrigger Event="Click"><LoadScene Target="OptionsMenu" /></EventTrigger></Triggers>
				</Button>
			</Elements>
		</Scene>

		<Scene Id="OptionsMenu" AssetId="Scenes/OptionsMenu">
			<Elements>
				<Inventory Source="PlayerOptions" AssetId="OptionsInventory" />
				<Button AssetId="BackToMainMenu" >
					<Triggers><EventTrigger Event="Click"><LoadScene Target="MainMenu" /></EventTrigger></Triggers>
				</Button>
			</Elements>
		</Scene>

		<Scene Id="SkillTree" AssetId="Scenes/SkillTree">
			<Elements>
				<Inventory Source="PlayerInventory" AssetId="Inventory" />
				<Button AssetId="BackToMainMenu" >
					<Triggers><EventTrigger Event="Click"><LoadScene Target="MainMenu" /></EventTrigger></Triggers>
				</Button>
			</Elements>
		</Scene>

		<Scene Id="Limbo" AssetId="Scenes/LimboLower">
			<Elements>
				<!-- <ObjectSpawn AssetId="Environtment" LevelId="Trees"/> -->

				<EnemySpawn Id="EnemySpawn" AssetId="EnemySpawnLocation" />

				<PlayerHitbox AssetId="PlayerHealth" />
				<SpecialEffectManager AssetId="SpecialEffectRoot" />
				
				<Element Id="Player" AssetId="EnemyTarget" />

				<Player Id="PlayerCamera" AssetId="Player" >
					<Shooters>
						<Shooter Id="ShooterWeaponLeft" AssetId="LeftShooter" ProjectileId="{Root.SkillTree.LeftShooter.Item}" >
							<Target AssetId="Target" />
						</Shooter>
						<Shooter Id="ShooterWeaponRight" AssetId="RightShooter" ProjectileId="{Root.SkillTree.RightShooter.Item}" >
							<Target AssetId="Target" />
						</Shooter>
					</Shooters>
				</Player>

				<GUIRoot AssetId="UIRoot">
					<Elements>
						<DamageDisplay AssetId="DamageDisplayRoot" DamageGUI="StandardDamageGUI" />
						<Button AssetId="BackToMainMenu" >
							<Triggers><EventTrigger Event="Click"><LoadScene Target="MainMenu" /></EventTrigger></Triggers>
						</Button>
						<Element AssetId="LoadingCover" IsVisible="{Limbo.IsLoadingInProgress}" />

						<ShooterGUIs AssetId="{Root.OptionsMenu.ControlStyle.ItemId}" >
							<ShooterGUI ShooterTarget="ShooterWeaponLeft" AssetId="ShootingGUILeft" AimingAssetId="AimingGUILeft" />
							<ShooterGUI ShooterTarget="ShooterWeaponRight" AssetId="ShootingGUIRight" AimingAssetId="AimingGUIRight" />
						</ShooterGUIs>
					</Elements>
				</GUIRoot>

				<Element AssetId="Ground" />
			</Elements>
		</Scene>
	</Scenes>
</Engine>